%% LaTeX Beamer presentation template (requires beamer package)
%% see http://bitbucket.org/rivanvx/beamer/wiki/Home
%% idea contributed by H. Turgut Uyar
%% template based on a template by Till Tantau
%% this template is still evolving - it might differ in future releases!

\documentclass{beamer}

\mode<presentation>
{
\usetheme{Warsaw}

\setbeamercovered{transparent}
}

\usepackage[english]{babel}
\usepackage[latin1]{inputenc}

% font definitions, try \usepackage{ae} instead of the following
% three lines if you don't like this look
\usepackage{mathptmx}
\usepackage[scaled=.90]{helvet}
\usepackage{courier}


\usepackage[T1]{fontenc}


\title{Persistence in practice}

% \subtitle{M.Sc. Eng. defense}

\author{Sune~Keller}
\date{December 14, 2012}
% This is only inserted into the PDF information catalog. Can be left
% out.
\subject{M.Sc. Eng. defense}

% Delete this, if you do not want the table of contents to pop up at
% the beginning of each subsection:
% \AtBeginSubsection[]
% {
% \begin{frame}<beamer>
% \frametitle{Outline}
% \tableofcontents[currentsection,currentsubsection]
% \end{frame}
% }

% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command:

%\beamerdefaultoverlayspecification{<+->}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\begin{frame}
\frametitle{Outline}
\tableofcontents[pausesections]
% You might wish to add the option [pausesections]
\end{frame}


\section{Introduction}

\begin{frame}
\frametitle{Partially Persistent Data Structures}
\begin{itemize}
  \item All versions available for access
  \pause
  \item New versions can be appended onto the most recent
  \pause
  \item All DS operations should be supported
  \pause
  \begin{itemize}
    \item Linked list: \textsc{head}, \textsc{size} at all versions,\newline\hphantom{Linked list: }\textsc{data} fields, \textsc{next} pointers from nodes
  \end{itemize}
  \pause
  \item Mentioned as ``rollback databases'' in \cite{10.1109/AFIPS.1987.11}
\end{itemize}
\end{frame}

\section{Method}

\subsection{Node Copying}

\begin{frame}
\frametitle{Node Copying}
\begin{itemize}
  \item Any bounded in-degree DS \cite{Driscoll198986}
  \item Expands node structure
  \begin{itemize}
    \item Modifications
    \item Back pointers
  \end{itemize}
  \item Adds auxillary structure for maintaining entry points (e.g. head)
\end{itemize}
\pause
\begin{figure}
\center
\only<1>{\vphantom{\includegraphics[height=0.55\textheight]{figures/v1.pdf}}}
\only<2>{\includegraphics[height=0.55\textheight]{figures/node-copying-example.pdf}}
\only<3>{\includegraphics[height=0.55\textheight]{figures/v1.pdf}}
\only<4>{\includegraphics[height=0.55\textheight]{figures/v2.pdf}}
\only<5>{\includegraphics[height=0.55\textheight]{figures/v3.pdf}}
\only<6>{\includegraphics[height=0.55\textheight]{figures/v4.pdf}}
\only<7>{\includegraphics[height=0.55\textheight]{figures/v5.pdf}}
\only<8>{\includegraphics[height=0.55\textheight]{figures/v6.pdf}}
\only<9>{\includegraphics[height=0.55\textheight]{figures/v7.pdf}}
\end{figure}
\end{frame}

\subsection{Rollback}
\begin{frame}
\frametitle{Rollback}
\begin{itemize}
  \item Hybrid of two na\"ive approaches ``log'', ``copy'' defined in \cite{Tsotras1995237}
  \begin{itemize}
    \item The paper deals with several, more advanced DS, including a hybrid
  \end{itemize}
  \pause
  \item The ``log'' approach stores all operations with inversion info
  \pause
  \item The ``copy'' approach stores full copy of every version
  \pause
  \item Rollback stores log for every operation, full copy of every $d$ versions
\end{itemize}
\end{frame}

\section{Empirical Analysis}

\begin{frame}
\frametitle{Empirical Analysis}
\begin{itemize}
  \item Two usage scenarios:
  \begin{itemize}

    \item Sequential: $\frac{1}{4}c$ of each operation in following
    order:\newline\hphantom{Sequential: } \textsc{insert}, \textsc{modify},
    \textsc{remove}, \textsc{access}

    \item Random: $c$ operations, $p=\frac{1}{4}$ for each type
  \end{itemize}

\end{itemize}
\end{frame}

\subsection{Implementation overview}

\begin{frame}
\frametitle{Implementation overview}
\begin{itemize}
  \item Three implementations:

  \begin{itemize}
    \item Node Copying
    \item Rollback -- Blackbox variant
    \item Rollback -- Eliminate-Reorder variant
  \end{itemize}
\end{itemize}
\includegraphics[width=\textwidth]{figures/classAbstractDoublyLinkedList__inherit__graph.pdf}
\end{frame}

\subsection{Experiments}


\begin{frame}
\frametitle{Experiments}
\begin{itemize}

  \item Duration \& count measured separately for each operation type

  \item 10 different operation counts, exponentially spaced in the range between
  1000 and 2000000 (both inclusive)

  \begin{itemize}
    \item Only the first 7 counts in Sequential usage scenario
  \end{itemize}

  \item 10 runs with each count, graphs show average durations and 95\%
  confidence intervals
  \begin{itemize}
    \item Note: Same seed passed to \texttt{srand()} with every experiment
  \end{itemize}

  \item Memory usage estimates conducted with duration measurements turned off

\end{itemize}
\end{frame}

\subsection{Results}
\begin{frame}
\frametitle{Results}
\begin{itemize}
  \item 
\end{itemize}
\end{frame}


\section*{Summary}

\begin{frame}
\frametitle<presentation>{Summary}

\begin{itemize}

  \item An optimized Rollback implementation may be up to half an order of
  magnitude faster at insertions than Node Copying, and at access in sequential
  scenarios with large enough data sets, but it falls short in the randomized
  scenario and in terms of memory usage.

\end{itemize}

% The following outlook is optional.
\vskip0pt plus.5fill
\begin{itemize}
  \item Future work
  \begin{itemize}
    \item More advanced data structures
    \item More usage scenarios
    \item Caching, I/O optimization, compression
  \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}<beamer:0>
\frametitle{References}
\bibliographystyle{alpha}
\bibliography{References}
\end{frame}

\end{document}
